from gurobipy import *

m = Model()

# with open('a265032_1dc.1024.txt') as reader:
with open('a265032_1dc.2048.txt') as reader:
    for line in reader:
        spl = line.split()
        if spl[0] == "p":
            nodes = m.addVars(int(spl[2]), vtype=GRB.BINARY)
        else:
            e1 = int(spl[1])-1
            e2 = int(spl[2])-1
            m.addConstr(nodes[e1]+nodes[e2] <= 1)


soln1 = """  1   28   29   40   43   50   71   74   81  120  123  134  137  176  183
 186  207  214  217  228  229  256  260  261  288  303  310  313  334  340
 341  355  383  396  397  403  418  446  449  476  477  488  491  498  515
 543  558  564  565  588  589  595  610  638  648  651  658  673  700  701
 728  731  743  746  753  775  778  785  824  827  848  855  858  870  873
 911  918  921  932  933  960  963  991 1006 1012 1013 1026 1054 1068 1069
1075 1096 1099 1106 1121 1148 1149 1159 1162 1169 1208 1211 1232 1239 1242
1254 1257 1286 1289 1328 1335 1338 1359 1366 1369 1380 1381 1408 1422 1428
1429 1443 1471 1474 1502 1516 1517 1523 1540 1541 1568 1583 1590 1593 1614
1620 1621 1635 1663 1676 1677 1683 1698 1726 1729 1756 1757 1768 1771 1778
1800 1803 1810 1825 1852 1853 1880 1883 1895 1898 1905 1936 1943 1946 1958
1961 1988 1989 2016 2031 2038 2041"""
soln2 = """  1  24  27  39  42  49  70  73  96 111 118 121 132 133 159 174 180 181 204 205
211 226 252 253 259 286 300 301 307 328 331 338 353 376 379 391 394 401 432 439
442 463 470 473 484 485 511 514 540 541 552 555 562 583 586 593 624 631 634 646
649 672 687 694 697 718 724 725 739 766 772 773 799 814 820 821 844 845 851 866
892 893 904 907 914 929 952 955 976 983 986 998 1001 1024"""

for v in soln1.split():
    nodes[int(v)-1].Start = 1

m.setObjective(nodes.sum(), GRB.MAXIMIZE)

# m.Params.Presolve = 2
# m.Params.MIPFocus = 3
m.Params.NodefileStart = 0.5
m.Params.Threads = 8
# m.Params.Cuts = 2
m.Params.Heuristics = 0
m.Params.ResultFile = 'result.sol'
m.Params.LogFile = 'output.log'

# m.tune()
m.optimize()
